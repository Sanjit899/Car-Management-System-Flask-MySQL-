{% extends 'layout.html' %}
{% block title %}Bookings{% endblock %}

{% block content %}
<style>
  /* ===== View Bookings Page Styling ===== */
  h3 {
    color: #00d9ff;
    text-shadow: 1px 1px 5px black;
    margin-bottom: 20px;
  }

  .btn-success {
    background-color: #00d9ff;
    border: none;
    font-weight: 600;
    border-radius: 10px;
    padding: 8px 15px;
    transition: background-color 0.3s ease;
  }

  .btn-success:hover {
    background-color: #00a3cc;
    color: #fff;
  }

  .btn-primary, .btn-danger {
    border-radius: 8px;
    font-size: 0.85rem;
    font-weight: 600;
    padding: 5px 10px;
    transition: all 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #00a3cc;
    color: #fff;
  }

  .btn-danger {
    background-color: #ff4d4d;
    border: none;
    color: #fff;
  }

  .btn-danger:hover {
    background-color: #cc0000;
    color: #fff;
  }

  table {
    width: 100%;
    background: rgba(0, 0, 0, 0.75);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 217, 255, 0.3);
    color: #fff;
  }

  table th {
    background: rgba(0, 217, 255, 0.3);
    color: #000;
    font-weight: 600;
    text-align: center;
  }

  table td {
    text-align: center;
    vertical-align: middle;
  }

  table tbody tr:hover {
    background: rgba(0, 217, 255, 0.15);
  }

  /* Responsive */
  @media (max-width: 768px) {
    table, thead, tbody, th, td, tr {
      display: block;
    }
    thead tr {
      display: none;
    }
    tbody tr {
      margin-bottom: 15px;
      background: rgba(0, 0, 0, 0.85);
      padding: 15px;
      border-radius: 12px;
    }
    tbody td {
      text-align: right;
      padding-left: 50%;
      position: relative;
    }
    tbody td::before {
      content: attr(data-label);
      position: absolute;
      left: 15px;
      width: 45%;
      padding-left: 10px;
      font-weight: bold;
      text-align: left;
      color: #00d9ff;
    }
  }

  .action-buttons form {
    display: inline-block;
  }

  .d-flex {
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }
</style>

<div class="d-flex">
  <h3>Bookings</h3>
  <a class="btn btn-success" href="{{ url_for('add_booking') }}">Add Booking</a>
</div>

<table class="table table-bordered mt-3">
  <thead>
    <tr>
      <th>ID</th>
      <th>Car</th>
      <th>Customer</th>
      <th>Start</th>
      <th>End</th>
      <th>Total</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for b in bookings %}
    <tr>
      <td data-label="ID">{{ b.id }}</td>
      <td data-label="Car">{{ b.car_name }}</td>
      <td data-label="Customer">{{ b.customer_name }}</td>
      <td data-label="Start">{{ b.start_date }}</td>
      <td data-label="End">{{ b.end_date }}</td>
      <td data-label="Total">{{ b.total_cost }}</td>
      <td data-label="Status">{{ b.status }}</td>
      <td data-label="Actions" class="action-buttons">
        <a class="btn btn-sm btn-primary" href="{{ url_for('edit_booking', id=b.id) }}">Edit</a>
        <form method="post" action="{{ url_for('delete_booking', id=b.id) }}" onsubmit="return confirm('Delete this booking?')">
          <button class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
